(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{47:function(e,t,r){e.exports=r(80)},52:function(e,t,r){},77:function(e,t,r){},80:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(24),l=(r(52),r(19));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=r(18),c=r(6),s=r(43),u=r(16),f=r.n(u),d=r(21),h=r(22),p=r.n(h),m="LOAD_CONFIG";function v(){return function(){var e=Object(d.a)(f.a.mark(function e(t){var r,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("http://52.56.180.211:9010/config").then(function(e){return e.data}).catch(function(e){return console.log("Looks like there was a problem: \n",e),e.status?{error:!0,message:"Looks like there was a problem"}:{error:!0,message:"Could not load config data"}});case 2:r=e.sent,n=m,r.error&&(console.log("send diff type"),n="ERROR"),t({type:n,payload:r});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}var O="FETCH_GROUPS";function g(){return function(){var e=Object(d.a)(f.a.mark(function e(t){var r,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("http://52.56.180.211:9010/groups").then(function(e){return e.data}).catch(function(e){return console.log("Looks like there was a problem: \n",e),e.status?[{error:!0,message:"Looks like there was a problem"}]:{error:!0,message:"Could not load group data"}});case 2:r=e.sent,n=O,r.error&&(console.log("send diff type"),n="ERROR"),t({type:n,payload:r});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}var b="ERROR";var y="LOAD_URL_STATUS";function j(e,t){var r="http://52.56.180.211:9010/health/".concat(e.replace(/^https?\:\/\//i,""));return function(){var e=Object(d.a)(f.a.mark(function e(n){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(r).then(function(e){return e.data[0].interval=t+1,console.log("status response: ",e.data[0]),e.data[0]}).catch(function(e){console.log("Looks like there was a problem: \n",e)});case 2:a=e.sent,n({type:y,payload:a});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}var k=Object(c.c)({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],groups:[],error:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var r=t.payload.reduce(function(e,t){var r=t.group_id,n=t.name,a=t.url,o=t.interval_check;e[n]||(e[n]=[]);var l={group_id:r,name:n,url:a,interval_check:o};return e[n].push(l),e},{});return Object.assign({},e,{data:r});case O:return Object.assign({},e,{groups:t.payload});case b:return Object.assign({},e,{error:t.payload});default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object.assign({},e,{data:t.payload});default:return e}}});r(74);var w=r(44),E=r.n(w),C=r(9),x=r(10),D=r(12),P=r(11),R=r(13),S=r(15),I=function(e){function t(e){var r;return Object(C.a)(this,t),(r=Object(D.a)(this,Object(P.a)(t).call(this,e))).state={error:null,errorInfo:null},r}return Object(R.a)(t,e),Object(x.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?a.a.createElement("div",{className:"container-fluid"},a.a.createElement("h2",null,"Something went wrong."),a.a.createElement("h4",null,"Please reload page to continue"),a.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),a.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),t}(n.Component),G=(r(77),r(26)),F=r(27),N=r.n(F),_=r(45),A=r(17),B=function(e){function t(e){var r;return Object(C.a)(this,t),(r=Object(D.a)(this,Object(P.a)(t).call(this,e))).state={flash:!1,time:0},r.interval=null,r.flashing=r.flashing.bind(Object(A.a)(r)),r}return Object(R.a)(t,e),Object(x.a)(t,[{key:"flashing",value:function(){this.props.flash?this.setState({time:Date.now(),flash:!this.state.flash}):this.setState({time:Date.now(),flash:!1})}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){e.flashing()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.onRedClick,r=e.onGreenClick,n=e.RedOn,o=e.GreenOn,l=e.Size,i=e.BlackColor,c=(e.DisabledColor,e.RedColor),s=e.RedDim,u=e.GreenColor,f=e.GreenDim,d=e.flash,h=Object(_.a)(e,["onRedClick","onGreenClick","RedOn","GreenOn","Size","BlackColor","DisabledColor","RedColor","RedDim","GreenColor","GreenDim","flash"]),p="";return p=d?this.state.flash?c:s:n?c:s,a.a.createElement("svg",Object.assign({width:"".concat(l,"px"),height:"".concat(l*(1/.375),"px"),viewBox:"0 0 60 110",version:"1.1"},h),a.a.createElement("defs",null,a.a.createElement("circle",{style:{cursor:t?"pointer":void 0},id:"redCirclePath",cx:"30",cy:"30",r:"20"}),a.a.createElement("circle",{style:{cursor:r?"pointer":void 0},id:"greenCirclePath",cx:"30",cy:"80",r:"20"}),a.a.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"shadowFilter"},a.a.createElement("feGaussianBlur",{stdDeviation:"3",in:"SourceAlpha",result:"shadowBlurInner1"}),a.a.createElement("feOffset",{dx:"0",dy:"4",in:"shadowBlurInner1",result:"shadowOffsetInner1"}),a.a.createElement("feComposite",{in:"shadowOffsetInner1",in2:"SourceAlpha",operator:"arithmetic",k2:"-1",k3:"1",result:"shadowInnerInner1"}),a.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0",type:"matrix",in:"shadowInnerInner1"}))),a.a.createElement("rect",{fill:i,x:"0",y:"0",width:"60",height:"110",rx:"8"}),a.a.createElement("use",{fill:p,fillRule:"evenodd",xlinkHref:"#redCirclePath"}),a.a.createElement("use",{fill:o?u:f,fillRule:"evenodd",xlinkHref:"#greenCirclePath"}),a.a.createElement("g",null,a.a.createElement("use",{onClick:t,fill:"black",fillOpacity:"1",filter:"url(#shadowFilter)",xlinkHref:"#redCirclePath"}),a.a.createElement("use",{onClick:r,fill:"black",fillOpacity:"1",filter:"url(#shadowFilter)",xlinkHref:"#greenCirclePath"})))}}]),t}(n.Component);B.defaultProps={onRedClick:void 0,onGreenClick:void 0,RedOn:!1,GreenOn:!1,Size:60,BlackColor:"#000000",DisabledColor:"#4A4A4A",RedColor:"#FF0000",RedDim:"#FF7777",GreenColor:"#48FF00",GreenDim:"#C2FFAA",flash:!1};var L=B;function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var U=function(e){function t(e){var r;return Object(C.a)(this,t),(r=Object(D.a)(this,Object(P.a)(t).call(this,e))).state={redOn:!1,greenOn:!1,redCounter:0,time:0,start:0,intervals:0,flash:!1},r.interval=null,r.dataPolling=null,r}return Object(R.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.duration,n=t.url;this.setState({start:Date.now()}),this.dataPolling=setInterval(function(){var t=e.state.intervals;e.props.loadUrlStatus(n,t),e.setState({intervals:t+1})},1e3*parseInt(r)),this.interval=setInterval(function(){return e.setState({time:Date.now()})},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.dataPolling),clearInterval(this.interval)}},{key:"render",value:function(){return a.a.createElement(L,{Size:50,RedOn:this.state.redOn,GreenOn:this.state.greenOn,flash:this.state.flash,time:this.state.time})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.status.data,n=t.start,a=t.time,o=t.redCounter,l=t.intervals;if(void 0!==r&&Object.keys(r).length>0&&void 0!==r.interval&&r.interval!==l){var i=!1;if(200===r.statusCode)return{greenOn:!0,redOn:!1,start:Date.now(),flash:i,redCounter:0};if(200!==r.statusCode)return o>=3?((a-n)/1e3>5&&(i=!0),{greenOn:!1,redOn:!0,redCounter:o+1,flash:i}):{greenOn:!1,redOn:!0,redCounter:o+1,flash:i}}return null}}]),t}(n.Component),H=Object(i.b)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(r,!0).forEach(function(t){Object(G.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e)},function(e){return Object(c.b)({loadUrlStatus:j},e)})(U);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var M=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.props.loadConfig(),this.props.fetchGroups()}},{key:"renderTraffic",value:function(){var e=this.props,t=e.config,r=t.data,n=t.groups,o=e.matches.match.params.id;return void 0!==n&&Object.keys(n).length>0?r[N.a.mapKeys(n,"id")[o].name].map(function(e,t){return a.a.createElement("div",{className:"col-xs-12 col-md-3"},a.a.createElement("div",null,a.a.createElement(H,{url:e.url,duration:e.interval_check})),a.a.createElement("div",null,e.url))}):""}},{key:"renderTrafficList",value:function(e){return e.map(function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement("ul",null,a.a.createElement("li",{key:e.group_id+e.url+t},"id: ",e.group_id),a.a.createElement("li",null,"url: ",e.url),a.a.createElement("li",null,"interval check: ",e.interval_check)))})}},{key:"renderConfig",value:function(e){var t=this,r=this.props.config.groups;return void 0!==r&&Object.keys(r).length>0?Object.keys(e).map(function(n,o){var i=e[n],c=N.a.mapKeys(r,"name")[n];return a.a.createElement("div",{className:"col-xs-12 col-md-6 col-lg-3 text-left",key:c.id+n+o},a.a.createElement("h4",null,a.a.createElement(l.b,{to:"/health/".concat(c.id)},n)),t.renderTrafficList(i))}):""}},{key:"render",value:function(){var e=this.props,t=e.config,r=t.data,n=t.groups,o=t.error,l=e.matches.match.params.id;return void 0!==o&&Object.keys(o).length>0&&(console.log(o),alert(o.message)),void 0!==l&&parseInt(l)>0&&void 0!==n&&Object.keys(n).length>0?a.a.createElement("div",{className:"container-fluid"},a.a.createElement("header",null,a.a.createElement("h2",{className:"text-center top-buffer"},"Configuration ",N.a.mapKeys(n,"id")[l].name)),a.a.createElement("div",{className:"row-fluid"},this.renderTraffic())):a.a.createElement("div",{className:"container-fluid"},a.a.createElement("header",null,a.a.createElement("h1",{className:"text-center top-buffer"},"Health Check")),a.a.createElement("div",{className:"row-fluid"},"Page is used to check health of external services. The following configurations are available to load"),a.a.createElement("div",{className:"row-fluid"},this.renderConfig(r)))}}]),t}(n.Component);var W=Object(i.b)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(r,!0).forEach(function(t){Object(G.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e)},function(e){return Object(c.b)({loadConfig:v,fetchGroups:g},e)})(M),K=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"App"},a.a.createElement(I,null,a.a.createElement(S.c,null,a.a.createElement(S.a,{path:"/health/:id",render:function(t){return a.a.createElement(W,Object.assign({matches:t},e.props))}}),a.a.createElement(S.a,{exact:!0,path:"/",render:function(t){return a.a.createElement(W,Object.assign({matches:t},e.props))}}))))}}]),t}(n.Component),J=Object(S.f)(K);E.a.config();var $,q=Object(c.e)(k,$,Object(c.d)(Object(c.a)(s.a)));Object(o.render)(a.a.createElement(i.a,{store:q},a.a.createElement(l.a,null,a.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);